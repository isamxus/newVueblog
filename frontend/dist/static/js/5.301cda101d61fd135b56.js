webpackJsonp([5],{"5/Yf":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("rVsN"),o=a.n(r),n={paramsDetailCreate:function(e){var t=e.PostContent;return t.detailName?t.detailCode?axios.post(REQUEST_URL.paramsDetailCreate,REQUEST_URL.handleParams(e)).then(function(e){return o.a.resolve(e.data.PostContent)}):o.a.reject({Msg:"请输入参数权限码",type:"local"}):o.a.reject({Msg:"请输入参数名称",type:"local"})},paramsDetailUpdate:function(e){var t=e.PostContent;return t.detailName?t.detailCode?axios.post(REQUEST_URL.paramsDetailUpdate,REQUEST_URL.handleParams(e)).then(function(e){return o.a.resolve(e.data.PostContent)}):o.a.reject({Msg:"请输入参数权限码",type:"local"}):o.a.reject({Msg:"请输入参数名称",type:"local"})},paramsDetailGetSingle:function(e){return axios.post(REQUEST_URL.paramsDetailGetSingle,REQUEST_URL.handleParams(e)).then(function(e){return o.a.resolve(e.data.PostContent)})},paramsDetailDelete:function(e){return axios.post(REQUEST_URL.paramsDetailDelete,REQUEST_URL.handleParams(e)).then(function(e){return o.a.resolve(e.data.PostContent)})},paramsDetailGetList:function(e){return axios.post(REQUEST_URL.paramsDetailGetList,REQUEST_URL.handleParams(e)).then(function(e){return o.a.resolve(e.data.PostContent)})}},i=function(e){return e||{detailName:"",detailCode:"",detailParentParamID:"",detailParentParam:"",edit:!1}},l={data:function(){return{paramsModal:!1,breadcrumbs:[{title:this.$route.query.paramsName}],columns:[{title:"序号",type:"index",width:120},{title:"名称",key:"detailName"},{title:"操作",align:"center",render:this.toolColumnRender}],tableData:[],createDetailForm:i(),createDetailRules:{detailName:[{required:!0,message:"请输入名称"}],detailCode:[{required:!0,message:"请输入权限码"}]},filter:{detailParentParamID:this.$route.query.id,detailParentParamCode:this.$route.query.Code}}},components:{SubNavigationFrame:a("C7Kb").a},mounted:function(){this.$store.commit("showAdminMenu",!0),this.paramsShowHandler()},methods:{toolColumnRender:function(e,t){var a=this;return e("div",[e("Button",{props:{type:"text"},domProps:{innerText:"编辑"},on:{click:function(e){a.createDetailForm=i({detailName:t.row.detailName,detailCode:t.row.detailCode,detailParentParam:t.row.detailParentParam,detailParentParamID:a.$route.query.id,detailParentParamCode:a.$route.query.Code,edit:!0,id:t.row.detail_params_id}),a.paramsModal=!0,e.stopPropagation(),e.stopPropagation()}}}),e("Button",{props:{type:"text"},domProps:{innerText:"删除"},on:{click:function(e){a.deleteDetailHandler(t.row.detail_params_id),e.stopPropagation()}}})])},paramsShowHandler:function(){var e=this,t=objectCopy(this.filter);for(var a in t)t[a]||delete t[a];n.paramsDetailGetList({PostContent:{filter:t}}).then(function(t){e.tableData=t}).catch(function(t){e.$Message.error(t)})},addDetailHandler:function(){var e=this;this.createDetailForm.detailParentParamID=this.$route.query.id,this.createDetailForm.detailParentParamCode=this.$route.query.Code,this.createDetailForm.detailParentParam=this.$route.query.paramsName,n.paramsDetailCreate({PostContent:this.createDetailForm}).then(function(t){e.paramsModal=!1,e.paramsShowHandler()}).catch(function(t){e.$Message.error(t)})},updateDetailHandler:function(){var e=this;n.paramsDetailUpdate({PostContent:this.createDetailForm}).then(function(t){e.paramsModal=!1,e.paramsShowHandler()}).catch(function(t){e.$Message.error(t)})},deleteDetailHandler:function(e){var t=this;if(!e)return this.$Message.warning("参数ID为空，无法删除！！！");this.$Modal.confirm({title:"操作确认",icon:"warning",content:"是否删除此参数",okText:"确定",showCancel:!0,loading:!0,onOk:function(){n.paramsDetailDelete({PostContent:{detail_params_id:e}}).then(function(e){t.$Message.success("成功删除参数！！！"),t.$Modal.remove(),t.paramsShowHandler()}).catch(function(e){t.$Modal.remove(),t.$Message.error(e)})}})}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("SubNavigationFrame",{attrs:{title:e.$route.query.paramsName,breadcrumb:e.breadcrumbs}},[a("div",{style:{textAlign:"right",marginTop:"-2.5rem"},attrs:{slot:"navigation"},slot:"navigation"},[a("Button",{on:{click:function(t){return e.$router.push({name:"Index"})}}},[e._v("返回主站")]),e._v(" "),a("Button",{on:{click:function(t){return e.$router.go(-1)}}},[e._v("返回")])],1),e._v(" "),a("div",{staticClass:"sub-page-container",style:{"margin-top":".5rem","padding-top":"1rem"},attrs:{slot:"content"},slot:"content"},[a("Row",[a("Col",{attrs:{span:"8"}},[a("div",{style:{marginBottom:".7rem"}},[a("Button",{attrs:{type:"primary"},on:{click:function(t){e.paramsModal=!0}}},[a("Icon",{attrs:{type:"md-add"}}),e._v("新增"+e._s(e.$route.query.paramsName))],1)],1)])],1),e._v(" "),a("Table",{attrs:{columns:e.columns,data:e.tableData}}),e._v(" "),a("Modal",{attrs:{title:e.createDetailForm.edit?"编辑"+e.$route.query.paramsName:"新增"+e.$route.query.paramsName,width:"600"},on:{"on-visible-change":function(t){return e.$refs.createForm.resetFields()}},model:{value:e.paramsModal,callback:function(t){e.paramsModal=t},expression:"paramsModal"}},[a("div",[a("Form",{ref:"createForm",attrs:{model:e.createDetailForm,rules:e.createDetailRules}},[a("Row",[a("Col",{attrs:{span:"24"}},[a("FormItem",{staticClass:"item-box",attrs:{label:"名称：",prop:"detailName"}},[a("Input",{attrs:{placeholder:"请输入名称"},model:{value:e.createDetailForm.detailName,callback:function(t){e.$set(e.createDetailForm,"detailName",t)},expression:"createDetailForm.detailName"}})],1)],1),e._v(" "),a("Col",{attrs:{span:"24"}},[a("FormItem",{staticClass:"item-box",attrs:{label:"权限码：",prop:"detailCode"}},[a("Input",{attrs:{placeholder:"请输入权限码"},model:{value:e.createDetailForm.detailCode,callback:function(t){e.$set(e.createDetailForm,"detailCode",t)},expression:"createDetailForm.detailCode"}})],1)],1)],1)],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:function(t){e.createDetailForm.edit?e.updateDetailHandler():e.addDetailHandler()}}},[e._v("确定")]),e._v(" "),a("Button",{on:{click:function(t){e.paramsModal=!1}}},[e._v("取消")])],1)])],1)])},staticRenderFns:[]};var d=a("C7Lr")(l,s,!1,function(e){a("ofKq")},null,null);t.default=d.exports},ofKq:function(e,t){}});
//# sourceMappingURL=5.301cda101d61fd135b56.js.map