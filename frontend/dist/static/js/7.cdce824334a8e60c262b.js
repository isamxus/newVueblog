webpackJsonp([7],{TYWO:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("C7Kb"),r=a("rVsN"),i=a.n(r),o={articleGetSingle:function(t){return axios.post(REQUEST_URL.articleGetSingle,REQUEST_URL.handleParams(t)).then(function(t){return i.a.resolve(t.data.PostContent)})},commentCreate:function(t){var e=t.PostContent;return e.commentContent?e.parentArticleID?axios.post(REQUEST_URL.commentCreate,REQUEST_URL.handleParams(t)).then(function(t){return i.a.resolve(t.data.PostContent)}):i.a.reject({Msg:"创建评论失败",type:"local"}):i.a.reject({Msg:"请输入评论内容",type:"local"})},commentGetPageList:function(t){return axios.post(REQUEST_URL.commentGetPageList,REQUEST_URL.handleParams(t)).then(function(t){return i.a.resolve(t.data.PostContent)})}},s={data:function(){return{articleDetailData:{},breadcrumbs:[{title:this.$route.meta.title}],commentContent:"",PageCount:0,PageNumber:1,PageSize:5,commentListData:[]}},components:{SubNavigationFrame:n.a},mounted:function(){this.getAricleDetailHandler(),this.getCommentListHandler()},methods:{getAricleDetailHandler:function(){var t=this;o.articleGetSingle({PostContent:{article_id:this.$route.query.id}}).then(function(e){t.articleDetailData=e,e.CreateTime=new Date(e.CreateTime).Format("yyyy-MM-dd")}).catch(function(e){t.$Message.error(e)})},createCommentHandler:function(){var t=this;if(!this.$store.state.IsLogin)return this.$Message.warning("请登录后发表评论！！！");var e=JSON.parse(localStorage.getItem("UserInfo")).UserName;o.commentCreate({PostContent:{parentArticleID:this.$route.query.id,parentArticleTitle:this.articleDetailData.articleTitle,commentContent:this.commentContent,commentHeadImg:"",commentAuthor:e}}).then(function(e){t.commentContent="",t.getCommentListHandler(),t.$Message.success("创建评论成功！！！")}).catch(function(e){if("local"===e.type)return t.$Message.warning(e.Msg);t.$Message.error(e)})},getCommentListHandler:function(){var t=this;o.commentGetPageList({PostContent:{filter:{parentArticleID:this.$route.query.id},_OrderBy:"-CreateTime",PageSize:this.PageSize,PageNumber:this.PageNumber}}).then(function(e){t.commentListData=e.Items.map(function(t){return t.CreateTime=new Date(t.CreateTime).Format("yyyy-MM-dd hh:mm"),t}),t.PageCount=e.TotalItems}).catch(function(e){t.$Message.error(e)})}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("SubNavigationFrame",{attrs:{title:t.$route.meta.title,breadcrumb:t.breadcrumbs}},[a("div",{style:{textAlign:"right",marginTop:"-2.5rem"},attrs:{slot:"navigation"},slot:"navigation"},[a("Button",{on:{click:function(e){return t.$router.go(-1)}}},[t._v("返回")])],1),t._v(" "),a("div",{staticClass:"article-detail-page-container",attrs:{slot:"content"},slot:"content"},[a("div",{staticClass:"article-content-part"},[a("div",{staticClass:"content_480px",style:{borderBottom:"1px solid #f8f8f9",padding:".7rem"}},[a("h2",{style:{textAlign:"center"}},[t._v(t._s(t.articleDetailData.articleTitle))]),t._v(" "),a("div",{style:{display:"flex",justifyContent:"center",margin:".7rem"}},[a("span",[a("Icon",{attrs:{type:"md-browsers"}}),t._v("分类："+t._s(t.articleDetailData.articleCagetoryName))],1),t._v(" "),a("span",[a("Icon",{attrs:{type:"ios-pricetags"}}),t._v("标签："+t._s(t.articleDetailData.articleTagsName||"无"))],1),t._v(" "),a("span",[a("Icon",{attrs:{type:"md-time"}}),t._v(t._s(t.articleDetailData.CreateTime))],1),t._v(" "),a("span",[a("Icon",{attrs:{type:"md-eye"}}),t._v("浏览"+t._s(t.articleDetailData.articleViews))],1)]),t._v(" "),a("p",{domProps:{innerHTML:t._s(t.articleDetailData.articleContent)}})]),t._v(" "),a("div",{staticClass:"titlebox",style:{marginTop:".7rem"}},[a("h3",[t._v("发表评论")])]),t._v(" "),a("div",[a("Input",{attrs:{type:"textarea",autosize:{minRows:5,maxRows:5}},model:{value:t.commentContent,callback:function(e){t.commentContent=e},expression:"commentContent"}})],1),t._v(" "),a("div",{style:{textAlign:"right",margin:"1.5rem 0rem"}},[a("Button",{attrs:{type:"primary"},on:{click:t.createCommentHandler}},[t._v("发布评论")])],1),t._v(" "),a("div",{staticClass:"Comment_list_480px",style:{display:"none"}},[a("div",{staticClass:"titlebox",style:{marginTop:".7rem"}},[a("h3",[t._v("评论列表")])]),t._v(" "),a("div",{staticClass:"comment-container"},t._l(t.commentListData,function(e,n){return a("Row",{key:e.id,staticClass:"comment-item"},[a("Col",{attrs:{span:"4"}},[a("Avatar",{attrs:{icon:"ios-person"}})],1),t._v(" "),a("Col",{attrs:{span:"20"}},[a("Row",[t._v(t._s(e.commentAuthor))]),t._v(" "),a("span",{style:{fontSize:"10px"}},[t._v(t._s(e.CreateTime))])],1),t._v(" "),a("Col",{attrs:{span:"24"}},[a("p",{style:{wordBreak:"break-all",padding:".7rem 0"}},[t._v(t._s(e.commentContent))])])],1)}),1),t._v(" "),a("Page",{style:{paddingTop:"1rem",textAlign:"center"},attrs:{size:"small",total:t.PageCount,current:t.PageNumber,"page-size":t.PageSize,placement:"top","show-elevator":"","show-total":""},on:{"on-change":function(e){t.PageNumber=e,t.getCommentListHandler()},"on-page-size-change":function(e){t.PageSize=e,t.getCommentListHandler()}}})],1)]),t._v(" "),a("div",{staticClass:"comment-content-part"},[a("div",{staticClass:"titlebox"},[a("h3",[t._v("评论列表")])]),t._v(" "),a("div",{staticClass:"comment-container"},t._l(t.commentListData,function(e,n){return a("Row",{key:e.id,staticClass:"comment-item"},[a("Col",{attrs:{span:"4"}},[a("Avatar",{attrs:{icon:"ios-person"}})],1),t._v(" "),a("Col",{attrs:{span:"20"}},[a("Row",[t._v(t._s(e.commentAuthor))]),t._v(" "),a("span",{style:{fontSize:"10px"}},[t._v(t._s(e.CreateTime))])],1),t._v(" "),a("Col",{attrs:{span:"24"}},[a("p",{style:{wordBreak:"break-all",padding:".7rem 0"}},[t._v(t._s(e.commentContent))])])],1)}),1),t._v(" "),a("Page",{style:{paddingTop:"1rem",textAlign:"center"},attrs:{size:"small",total:t.PageCount,current:t.PageNumber,"page-size":t.PageSize,placement:"top","show-elevator":"","show-total":""},on:{"on-change":function(e){t.PageNumber=e,t.getCommentListHandler()},"on-page-size-change":function(e){t.PageSize=e,t.getCommentListHandler()}}})],1)])])},staticRenderFns:[]};var c=a("C7Lr")(s,l,!1,function(t){a("q1vb")},null,null);e.default=c.exports},q1vb:function(t,e){}});
//# sourceMappingURL=7.cdce824334a8e60c262b.js.map